   1               		.file	"keymap_common.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.action_get_macro,"ax",@progbits
  11               		.weak	action_get_macro
  13               	action_get_macro:
  14               	.LVL0:
  15               	.LFB21:
  16               		.file 1 "quantum/keymap_common.c"
   1:quantum/keymap_common.c **** /*
   2:quantum/keymap_common.c **** Copyright 2012-2017 Jun Wako <wakojun@gmail.com>
   3:quantum/keymap_common.c **** 
   4:quantum/keymap_common.c **** This program is free software: you can redistribute it and/or modify
   5:quantum/keymap_common.c **** it under the terms of the GNU General Public License as published by
   6:quantum/keymap_common.c **** the Free Software Foundation, either version 2 of the License, or
   7:quantum/keymap_common.c **** (at your option) any later version.
   8:quantum/keymap_common.c **** 
   9:quantum/keymap_common.c **** This program is distributed in the hope that it will be useful,
  10:quantum/keymap_common.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:quantum/keymap_common.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:quantum/keymap_common.c **** GNU General Public License for more details.
  13:quantum/keymap_common.c **** 
  14:quantum/keymap_common.c **** You should have received a copy of the GNU General Public License
  15:quantum/keymap_common.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:quantum/keymap_common.c **** */
  17:quantum/keymap_common.c **** 
  18:quantum/keymap_common.c **** #include "keymap.h"
  19:quantum/keymap_common.c **** #include "report.h"
  20:quantum/keymap_common.c **** #include "keycode.h"
  21:quantum/keymap_common.c **** #include "action_layer.h"
  22:quantum/keymap_common.c **** #if defined(__AVR__)
  23:quantum/keymap_common.c **** #    include <util/delay.h>
  24:quantum/keymap_common.c **** #    include <stdio.h>
  25:quantum/keymap_common.c **** #endif
  26:quantum/keymap_common.c **** #include "action.h"
  27:quantum/keymap_common.c **** #include "action_macro.h"
  28:quantum/keymap_common.c **** #include "debug.h"
  29:quantum/keymap_common.c **** #include "quantum.h"
  30:quantum/keymap_common.c **** 
  31:quantum/keymap_common.c **** #ifdef BACKLIGHT_ENABLE
  32:quantum/keymap_common.c **** #    include "backlight.h"
  33:quantum/keymap_common.c **** #endif
  34:quantum/keymap_common.c **** 
  35:quantum/keymap_common.c **** #ifdef MIDI_ENABLE
  36:quantum/keymap_common.c **** #    include "process_midi.h"
  37:quantum/keymap_common.c **** #endif
  38:quantum/keymap_common.c **** 
  39:quantum/keymap_common.c **** extern keymap_config_t keymap_config;
  40:quantum/keymap_common.c **** 
  41:quantum/keymap_common.c **** #include <inttypes.h>
  42:quantum/keymap_common.c **** 
  43:quantum/keymap_common.c **** /* converts key to action */
  44:quantum/keymap_common.c **** action_t action_for_key(uint8_t layer, keypos_t key) {
  45:quantum/keymap_common.c ****     // 16bit keycodes - important
  46:quantum/keymap_common.c ****     uint16_t keycode = keymap_key_to_keycode(layer, key);
  47:quantum/keymap_common.c **** 
  48:quantum/keymap_common.c ****     // keycode remapping
  49:quantum/keymap_common.c ****     keycode = keycode_config(keycode);
  50:quantum/keymap_common.c **** 
  51:quantum/keymap_common.c ****     action_t action = {};
  52:quantum/keymap_common.c ****     uint8_t  action_layer, when, mod;
  53:quantum/keymap_common.c **** 
  54:quantum/keymap_common.c ****     (void)action_layer;
  55:quantum/keymap_common.c ****     (void)when;
  56:quantum/keymap_common.c ****     (void)mod;
  57:quantum/keymap_common.c **** 
  58:quantum/keymap_common.c ****     switch (keycode) {
  59:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
  60:quantum/keymap_common.c ****         case KC_LCTRL ... KC_RGUI:
  61:quantum/keymap_common.c ****             action.code = ACTION_KEY(keycode);
  62:quantum/keymap_common.c ****             break;
  63:quantum/keymap_common.c **** #ifdef EXTRAKEY_ENABLE
  64:quantum/keymap_common.c ****         case KC_SYSTEM_POWER ... KC_SYSTEM_WAKE:
  65:quantum/keymap_common.c ****             action.code = ACTION_USAGE_SYSTEM(KEYCODE2SYSTEM(keycode));
  66:quantum/keymap_common.c ****             break;
  67:quantum/keymap_common.c ****         case KC_AUDIO_MUTE ... KC_BRIGHTNESS_DOWN:
  68:quantum/keymap_common.c ****             action.code = ACTION_USAGE_CONSUMER(KEYCODE2CONSUMER(keycode));
  69:quantum/keymap_common.c ****             break;
  70:quantum/keymap_common.c **** #endif
  71:quantum/keymap_common.c **** #ifdef MOUSEKEY_ENABLE
  72:quantum/keymap_common.c ****         case KC_MS_UP ... KC_MS_ACCEL2:
  73:quantum/keymap_common.c ****             action.code = ACTION_MOUSEKEY(keycode);
  74:quantum/keymap_common.c ****             break;
  75:quantum/keymap_common.c **** #endif
  76:quantum/keymap_common.c ****         case KC_TRNS:
  77:quantum/keymap_common.c ****             action.code = ACTION_TRANSPARENT;
  78:quantum/keymap_common.c ****             break;
  79:quantum/keymap_common.c ****         case QK_MODS ... QK_MODS_MAX:;
  80:quantum/keymap_common.c ****             // Has a modifier
  81:quantum/keymap_common.c ****             // Split it up
  82:quantum/keymap_common.c ****             action.code = ACTION_MODS_KEY(keycode >> 8, keycode & 0xFF);  // adds modifier to key
  83:quantum/keymap_common.c ****             break;
  84:quantum/keymap_common.c **** #ifndef NO_ACTION_FUNCTION
  85:quantum/keymap_common.c ****         case KC_FN0 ... KC_FN31:
  86:quantum/keymap_common.c ****             action.code = keymap_function_id_to_action(FN_INDEX(keycode));
  87:quantum/keymap_common.c ****             break;
  88:quantum/keymap_common.c ****         case QK_FUNCTION ... QK_FUNCTION_MAX:;
  89:quantum/keymap_common.c ****             // Is a shortcut for function action_layer, pull last 12bits
  90:quantum/keymap_common.c ****             // This means we have 4,096 FN macros at our disposal
  91:quantum/keymap_common.c ****             action.code = keymap_function_id_to_action((int)keycode & 0xFFF);
  92:quantum/keymap_common.c ****             break;
  93:quantum/keymap_common.c **** #endif
  94:quantum/keymap_common.c **** #ifndef NO_ACTION_MACRO
  95:quantum/keymap_common.c ****         case QK_MACRO ... QK_MACRO_MAX:
  96:quantum/keymap_common.c ****             if (keycode & 0x800)  // tap macros have upper bit set
  97:quantum/keymap_common.c ****                 action.code = ACTION_MACRO_TAP(keycode & 0xFF);
  98:quantum/keymap_common.c ****             else
  99:quantum/keymap_common.c ****                 action.code = ACTION_MACRO(keycode & 0xFF);
 100:quantum/keymap_common.c ****             break;
 101:quantum/keymap_common.c **** #endif
 102:quantum/keymap_common.c **** #ifndef NO_ACTION_LAYER
 103:quantum/keymap_common.c ****         case QK_LAYER_TAP ... QK_LAYER_TAP_MAX:
 104:quantum/keymap_common.c ****             action.code = ACTION_LAYER_TAP_KEY((keycode >> 0x8) & 0xF, keycode & 0xFF);
 105:quantum/keymap_common.c ****             break;
 106:quantum/keymap_common.c ****         case QK_TO ... QK_TO_MAX:;
 107:quantum/keymap_common.c ****             // Layer set "GOTO"
 108:quantum/keymap_common.c ****             when         = (keycode >> 0x4) & 0x3;
 109:quantum/keymap_common.c ****             action_layer = keycode & 0xF;
 110:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_SET(action_layer, when);
 111:quantum/keymap_common.c ****             break;
 112:quantum/keymap_common.c ****         case QK_MOMENTARY ... QK_MOMENTARY_MAX:;
 113:quantum/keymap_common.c ****             // Momentary action_layer
 114:quantum/keymap_common.c ****             action_layer = keycode & 0xFF;
 115:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_MOMENTARY(action_layer);
 116:quantum/keymap_common.c ****             break;
 117:quantum/keymap_common.c ****         case QK_DEF_LAYER ... QK_DEF_LAYER_MAX:;
 118:quantum/keymap_common.c ****             // Set default action_layer
 119:quantum/keymap_common.c ****             action_layer = keycode & 0xFF;
 120:quantum/keymap_common.c ****             action.code  = ACTION_DEFAULT_LAYER_SET(action_layer);
 121:quantum/keymap_common.c ****             break;
 122:quantum/keymap_common.c ****         case QK_TOGGLE_LAYER ... QK_TOGGLE_LAYER_MAX:;
 123:quantum/keymap_common.c ****             // Set toggle
 124:quantum/keymap_common.c ****             action_layer = keycode & 0xFF;
 125:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_TOGGLE(action_layer);
 126:quantum/keymap_common.c ****             break;
 127:quantum/keymap_common.c **** #endif
 128:quantum/keymap_common.c **** #ifndef NO_ACTION_ONESHOT
 129:quantum/keymap_common.c ****         case QK_ONE_SHOT_LAYER ... QK_ONE_SHOT_LAYER_MAX:;
 130:quantum/keymap_common.c ****             // OSL(action_layer) - One-shot action_layer
 131:quantum/keymap_common.c ****             action_layer = keycode & 0xFF;
 132:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_ONESHOT(action_layer);
 133:quantum/keymap_common.c ****             break;
 134:quantum/keymap_common.c ****         case QK_ONE_SHOT_MOD ... QK_ONE_SHOT_MOD_MAX:;
 135:quantum/keymap_common.c ****             // OSM(mod) - One-shot mod
 136:quantum/keymap_common.c ****             mod         = mod_config(keycode & 0xFF);
 137:quantum/keymap_common.c ****             action.code = ACTION_MODS_ONESHOT(mod);
 138:quantum/keymap_common.c ****             break;
 139:quantum/keymap_common.c **** #endif
 140:quantum/keymap_common.c **** #ifndef NO_ACTION_LAYER
 141:quantum/keymap_common.c ****         case QK_LAYER_TAP_TOGGLE ... QK_LAYER_TAP_TOGGLE_MAX:
 142:quantum/keymap_common.c ****             action.code = ACTION_LAYER_TAP_TOGGLE(keycode & 0xFF);
 143:quantum/keymap_common.c ****             break;
 144:quantum/keymap_common.c ****         case QK_LAYER_MOD ... QK_LAYER_MOD_MAX:
 145:quantum/keymap_common.c ****             mod          = mod_config(keycode & 0xF);
 146:quantum/keymap_common.c ****             action_layer = (keycode >> 4) & 0xF;
 147:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_MODS(action_layer, mod);
 148:quantum/keymap_common.c ****             break;
 149:quantum/keymap_common.c **** #endif
 150:quantum/keymap_common.c **** #ifndef NO_ACTION_TAPPING
 151:quantum/keymap_common.c ****         case QK_MOD_TAP ... QK_MOD_TAP_MAX:
 152:quantum/keymap_common.c ****             mod         = mod_config((keycode >> 0x8) & 0x1F);
 153:quantum/keymap_common.c ****             action.code = ACTION_MODS_TAP_KEY(mod, keycode & 0xFF);
 154:quantum/keymap_common.c ****             break;
 155:quantum/keymap_common.c **** #endif
 156:quantum/keymap_common.c **** #ifdef SWAP_HANDS_ENABLE
 157:quantum/keymap_common.c ****         case QK_SWAP_HANDS ... QK_SWAP_HANDS_MAX:
 158:quantum/keymap_common.c ****             action.code = ACTION(ACT_SWAP_HANDS, keycode & 0xff);
 159:quantum/keymap_common.c ****             break;
 160:quantum/keymap_common.c **** #endif
 161:quantum/keymap_common.c **** 
 162:quantum/keymap_common.c ****         default:
 163:quantum/keymap_common.c ****             action.code = ACTION_NO;
 164:quantum/keymap_common.c ****             break;
 165:quantum/keymap_common.c ****     }
 166:quantum/keymap_common.c ****     return action;
 167:quantum/keymap_common.c **** }
 168:quantum/keymap_common.c **** 
 169:quantum/keymap_common.c **** __attribute__((weak)) const uint16_t PROGMEM fn_actions[] = {
 170:quantum/keymap_common.c **** 
 171:quantum/keymap_common.c **** };
 172:quantum/keymap_common.c **** 
 173:quantum/keymap_common.c **** /* Macro */
 174:quantum/keymap_common.c **** __attribute__((weak)) const macro_t *action_get_macro(keyrecord_t *record, uint8_t id, uint8_t opt)
  17               		.loc 1 174 101 view -0
  18               		.cfi_startproc
  19               	/* prologue: function */
  20               	/* frame size = 0 */
  21               	/* stack size = 0 */
  22               	.L__stack_usage = 0
  23               		.loc 1 174 103 view .LVU1
  24               		.loc 1 174 1 is_stmt 0 view .LVU2
  25 0000 90E0      		ldi r25,0
  26 0002 80E0      		ldi r24,0
  27               	.LVL1:
  28               	/* epilogue start */
  29               		.loc 1 174 1 view .LVU3
  30 0004 0895      		ret
  31               		.cfi_endproc
  32               	.LFE21:
  34               		.section	.text.action_function,"ax",@progbits
  35               		.weak	action_function
  37               	action_function:
  38               	.LVL2:
  39               	.LFB22:
 175:quantum/keymap_common.c **** 
 176:quantum/keymap_common.c **** /* Function */
 177:quantum/keymap_common.c **** __attribute__((weak)) void action_function(keyrecord_t *record, uint8_t id, uint8_t opt) {}
  40               		.loc 1 177 90 is_stmt 1 view -0
  41               		.cfi_startproc
  42               	/* prologue: function */
  43               	/* frame size = 0 */
  44               	/* stack size = 0 */
  45               	.L__stack_usage = 0
  46               		.loc 1 177 91 view .LVU5
  47               	/* epilogue start */
  48               		.loc 1 177 1 is_stmt 0 view .LVU6
  49 0000 0895      		ret
  50               		.cfi_endproc
  51               	.LFE22:
  53               		.section	.text.keymap_key_to_keycode,"ax",@progbits
  54               		.weak	keymap_key_to_keycode
  56               	keymap_key_to_keycode:
  57               	.LVL3:
  58               	.LFB23:
 178:quantum/keymap_common.c **** 
 179:quantum/keymap_common.c **** // translates key to keycode
 180:quantum/keymap_common.c **** __attribute__((weak)) uint16_t keymap_key_to_keycode(uint8_t layer, keypos_t key) {
  59               		.loc 1 180 83 is_stmt 1 view -0
  60               		.cfi_startproc
  61               	/* prologue: function */
  62               	/* frame size = 0 */
  63               	/* stack size = 0 */
  64               	.L__stack_usage = 0
  65               		.loc 1 180 83 is_stmt 0 view .LVU8
  66 0000 972F      		mov r25,r23
 181:quantum/keymap_common.c ****     // Read entire word (16bits)
 182:quantum/keymap_common.c ****     return pgm_read_word(&keymaps[(layer)][(key.row)][(key.col)]);
  67               		.loc 1 182 5 is_stmt 1 view .LVU9
  68               	.LBB2:
  69               		.loc 1 182 12 view .LVU10
  70 0002 70E0      		ldi r23,0
  71               		.loc 1 182 12 is_stmt 0 view .LVU11
  72 0004 25E0      		ldi r18,lo8(5)
  73 0006 929F      		mul r25,r18
  74 0008 600D      		add r22,r0
  75 000a 711D      		adc r23,r1
  76 000c 1124      		clr __zero_reg__
  77               	.LVL4:
  78               		.loc 1 182 12 view .LVU12
  79 000e FB01      		movw r30,r22
  80 0010 98E2      		ldi r25,lo8(40)
  81 0012 899F      		mul r24,r25
  82 0014 E00D      		add r30,r0
  83 0016 F11D      		adc r31,r1
  84 0018 1124      		clr __zero_reg__
  85 001a EE0F      		lsl r30
  86 001c FF1F      		rol r31
  87               	.LVL5:
  88               		.loc 1 182 12 view .LVU13
  89 001e E050      		subi r30,lo8(-(keymaps))
  90 0020 F040      		sbci r31,hi8(-(keymaps))
  91               	.LVL6:
  92               		.loc 1 182 12 is_stmt 1 view .LVU14
  93               		.loc 1 182 12 view .LVU15
  94               	/* #APP */
  95               	 ;  182 "quantum/keymap_common.c" 1
  96 0022 8591      		lpm r24, Z+
  97 0024 9491      		lpm r25, Z
  98               		
  99               	 ;  0 "" 2
 100               	.LVL7:
 101               		.loc 1 182 12 view .LVU16
 102               	/* #NOAPP */
 103               	/* epilogue start */
 104               	.LBE2:
 183:quantum/keymap_common.c **** }
 105               		.loc 1 183 1 is_stmt 0 view .LVU17
 106 0026 0895      		ret
 107               		.cfi_endproc
 108               	.LFE23:
 110               		.section	.text.action_for_key,"ax",@progbits
 111               	.global	action_for_key
 113               	action_for_key:
 114               	.LVL8:
 115               	.LFB20:
  44:quantum/keymap_common.c ****     // 16bit keycodes - important
 116               		.loc 1 44 54 is_stmt 1 view -0
 117               		.cfi_startproc
  44:quantum/keymap_common.c ****     // 16bit keycodes - important
 118               		.loc 1 44 54 is_stmt 0 view .LVU19
 119 0000 CF93      		push r28
 120               	.LCFI0:
 121               		.cfi_def_cfa_offset 3
 122               		.cfi_offset 28, -2
 123 0002 DF93      		push r29
 124               	.LCFI1:
 125               		.cfi_def_cfa_offset 4
 126               		.cfi_offset 29, -3
 127               	/* prologue: function */
 128               	/* frame size = 0 */
 129               	/* stack size = 2 */
 130               	.L__stack_usage = 2
  46:quantum/keymap_common.c **** 
 131               		.loc 1 46 5 is_stmt 1 view .LVU20
  46:quantum/keymap_common.c **** 
 132               		.loc 1 46 24 is_stmt 0 view .LVU21
 133 0004 0E94 0000 		call keymap_key_to_keycode
 134               	.LVL9:
  49:quantum/keymap_common.c **** 
 135               		.loc 1 49 5 is_stmt 1 view .LVU22
  49:quantum/keymap_common.c **** 
 136               		.loc 1 49 15 is_stmt 0 view .LVU23
 137 0008 0E94 0000 		call keycode_config
 138               	.LVL10:
  49:quantum/keymap_common.c **** 
 139               		.loc 1 49 15 view .LVU24
 140 000c EC01      		movw r28,r24
 141               	.LVL11:
  51:quantum/keymap_common.c ****     uint8_t  action_layer, when, mod;
 142               		.loc 1 51 5 is_stmt 1 view .LVU25
  52:quantum/keymap_common.c **** 
 143               		.loc 1 52 5 view .LVU26
  54:quantum/keymap_common.c ****     (void)when;
 144               		.loc 1 54 5 view .LVU27
  55:quantum/keymap_common.c ****     (void)mod;
 145               		.loc 1 55 5 view .LVU28
  56:quantum/keymap_common.c **** 
 146               		.loc 1 56 5 view .LVU29
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 147               		.loc 1 58 5 view .LVU30
 148 000e 8115      		cp r24,__zero_reg__
 149 0010 23E5      		ldi r18,83
 150 0012 9207      		cpc r25,r18
 151 0014 00F4      		brsh .L5
 152 0016 8115      		cp r24,__zero_reg__
 153 0018 32E5      		ldi r19,82
 154 001a 9307      		cpc r25,r19
 155 001c 00F0      		brlo .+2
 156 001e 00C0      		rjmp .L6
 157 0020 8115      		cp r24,__zero_reg__
 158 0022 9042      		sbci r25,32
 159 0024 00F4      		brsh .L7
 160 0026 C115      		cp r28,__zero_reg__
 161 0028 81E0      		ldi r24,1
 162 002a D807      		cpc r29,r24
 163               	.LVL12:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 164               		.loc 1 58 5 is_stmt 0 view .LVU31
 165 002c 00F4      		brsh .L8
 166 002e C53A      		cpi r28,-91
 167 0030 D105      		cpc r29,__zero_reg__
 168 0032 00F4      		brsh .L9
 169 0034 C430      		cpi r28,4
 170 0036 D105      		cpc r29,__zero_reg__
 171 0038 00F4      		brsh .L8
 172 003a C130      		cpi r28,1
 173 003c D105      		cpc r29,__zero_reg__
 174 003e 01F0      		breq .L8
 175               	.L24:
 163:quantum/keymap_common.c ****             break;
 176               		.loc 1 163 25 view .LVU32
 177 0040 D0E0      		ldi r29,0
 178 0042 C0E0      		ldi r28,0
 179               	.LVL13:
 163:quantum/keymap_common.c ****             break;
 180               		.loc 1 163 25 view .LVU33
 181 0044 00C0      		rjmp .L8
 182               	.LVL14:
 183               	.L9:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 184               		.loc 1 58 5 view .LVU34
 185 0046 CE01      		movw r24,r28
 186 0048 805E      		subi r24,-32
 187 004a 9109      		sbc r25,__zero_reg__
 188 004c 0897      		sbiw r24,8
 189 004e 00F4      		brsh .L24
 190               	.LVL15:
 191               	.L8:
 166:quantum/keymap_common.c **** }
 192               		.loc 1 166 5 is_stmt 1 view .LVU35
 167:quantum/keymap_common.c **** 
 193               		.loc 1 167 1 is_stmt 0 view .LVU36
 194 0050 CE01      		movw r24,r28
 195               	/* epilogue start */
 196 0052 DF91      		pop r29
 197 0054 CF91      		pop r28
 198 0056 0895      		ret
 199               	.LVL16:
 200               	.L7:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 201               		.loc 1 58 5 view .LVU37
 202 0058 C115      		cp r28,__zero_reg__
 203 005a 91E5      		ldi r25,81
 204 005c D907      		cpc r29,r25
 205 005e 00F0      		brlo .+2
 206 0060 00C0      		rjmp .L10
 207 0062 C115      		cp r28,__zero_reg__
 208 0064 20E5      		ldi r18,80
 209 0066 D207      		cpc r29,r18
 210 0068 00F0      		brlo .+2
 211 006a 00C0      		rjmp .L11
 212 006c C115      		cp r28,__zero_reg__
 213 006e 30E4      		ldi r19,64
 214 0070 D307      		cpc r29,r19
 215 0072 00F0      		brlo .L24
 104:quantum/keymap_common.c ****             break;
 216               		.loc 1 104 13 is_stmt 1 view .LVU38
 104:quantum/keymap_common.c ****             break;
 217               		.loc 1 104 27 is_stmt 0 view .LVU39
 218 0074 DF70      		andi r29,15
 219 0076 D06A      		ori r29,160
 220               	.LVL17:
 105:quantum/keymap_common.c ****         case QK_TO ... QK_TO_MAX:;
 221               		.loc 1 105 13 is_stmt 1 view .LVU40
 222 0078 00C0      		rjmp .L8
 223               	.LVL18:
 224               	.L5:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 225               		.loc 1 58 5 is_stmt 0 view .LVU41
 226 007a 8115      		cp r24,__zero_reg__
 227 007c 46E5      		ldi r20,86
 228 007e 9407      		cpc r25,r20
 229 0080 00F4      		brsh .L13
 230 0082 C115      		cp r28,__zero_reg__
 231 0084 85E5      		ldi r24,85
 232 0086 D807      		cpc r29,r24
 233               	.LVL19:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 234               		.loc 1 58 5 view .LVU42
 235 0088 00F0      		brlo .+2
 236 008a 00C0      		rjmp .L14
 237 008c C115      		cp r28,__zero_reg__
 238 008e 94E5      		ldi r25,84
 239 0090 D907      		cpc r29,r25
 240 0092 00F0      		brlo .+2
 241 0094 00C0      		rjmp .L29
 122:quantum/keymap_common.c ****             // Set toggle
 242               		.loc 1 122 54 is_stmt 1 view .LVU43
 124:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_TOGGLE(action_layer);
 243               		.loc 1 124 13 view .LVU44
 244               	.LVL20:
 125:quantum/keymap_common.c ****             break;
 245               		.loc 1 125 13 view .LVU45
 125:quantum/keymap_common.c ****             break;
 246               		.loc 1 125 28 is_stmt 0 view .LVU46
 247 0096 CE01      		movw r24,r28
 248 0098 8370      		andi r24,3
 249 009a 9927      		clr r25
 250 009c 21E0      		ldi r18,lo8(1)
 251 009e 30E0      		ldi r19,0
 252 00a0 00C0      		rjmp 2f
 253               		1:
 254 00a2 220F      		lsl r18
 255 00a4 331F      		rol r19
 256               		2:
 257 00a6 8A95      		dec r24
 258 00a8 02F4      		brpl 1b
 259 00aa C695      		lsr r28
 260 00ac C695      		lsr r28
 261               	.LVL21:
 125:quantum/keymap_common.c ****             break;
 262               		.loc 1 125 28 view .LVU47
 263 00ae 90E2      		ldi r25,lo8(32)
 264 00b0 C99F      		mul r28,r25
 265 00b2 E001      		movw r28,r0
 266 00b4 1124      		clr __zero_reg__
 267 00b6 C22B      		or r28,r18
 268 00b8 D32B      		or r29,r19
 269 00ba DA68      		ori r29,138
 270               	.LVL22:
 126:quantum/keymap_common.c **** #endif
 271               		.loc 1 126 13 is_stmt 1 view .LVU48
 272 00bc 00C0      		rjmp .L8
 273               	.LVL23:
 274               	.L13:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 275               		.loc 1 58 5 is_stmt 0 view .LVU49
 276 00be 8115      		cp r24,__zero_reg__
 277 00c0 2AE5      		ldi r18,90
 278 00c2 9207      		cpc r25,r18
 279 00c4 00F4      		brsh .L17
 280 00c6 8115      		cp r24,__zero_reg__
 281 00c8 39E5      		ldi r19,89
 282 00ca 9307      		cpc r25,r19
 283 00cc 00F0      		brlo .+2
 284 00ce 00C0      		rjmp .L18
 285 00d0 8115      		cp r24,__zero_reg__
 286 00d2 48E5      		ldi r20,88
 287 00d4 9407      		cpc r25,r20
 288 00d6 00F4      		brsh .+2
 289 00d8 00C0      		rjmp .L24
 142:quantum/keymap_common.c ****             break;
 290               		.loc 1 142 13 is_stmt 1 view .LVU50
 142:quantum/keymap_common.c ****             break;
 291               		.loc 1 142 27 is_stmt 0 view .LVU51
 292 00da D82F      		mov r29,r24
 293 00dc CC27      		clr r28
 294 00de C06F      		ori r28,240
 295 00e0 D06A      		ori r29,160
 296               	.LVL24:
 143:quantum/keymap_common.c ****         case QK_LAYER_MOD ... QK_LAYER_MOD_MAX:
 297               		.loc 1 143 13 is_stmt 1 view .LVU52
 298 00e2 00C0      		rjmp .L8
 299               	.LVL25:
 300               	.L17:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 301               		.loc 1 58 5 is_stmt 0 view .LVU53
 302 00e4 9056      		subi r25,96
 303               	.LVL26:
  58:quantum/keymap_common.c ****         case KC_A ... KC_EXSEL:
 304               		.loc 1 58 5 view .LVU54
 305 00e6 8115      		cp r24,__zero_reg__
 306 00e8 9042      		sbci r25,32
 307 00ea 00F0      		brlo .+2
 308 00ec 00C0      		rjmp .L24
 152:quantum/keymap_common.c ****             action.code = ACTION_MODS_TAP_KEY(mod, keycode & 0xFF);
 309               		.loc 1 152 13 is_stmt 1 view .LVU55
 152:quantum/keymap_common.c ****             action.code = ACTION_MODS_TAP_KEY(mod, keycode & 0xFF);
 310               		.loc 1 152 27 is_stmt 0 view .LVU56
 311 00ee 8D2F      		mov r24,r29
 312 00f0 8F71      		andi r24,lo8(31)
 313 00f2 0E94 0000 		call mod_config
 314               	.LVL27:
 153:quantum/keymap_common.c ****             break;
 315               		.loc 1 153 13 is_stmt 1 view .LVU57
 153:quantum/keymap_common.c ****             break;
 316               		.loc 1 153 27 is_stmt 0 view .LVU58
 317 00f6 90E0      		ldi r25,0
 318 00f8 982F      		mov r25,r24
 319 00fa 8827      		clr r24
 320               	.LVL28:
 153:quantum/keymap_common.c ****             break;
 321               		.loc 1 153 27 view .LVU59
 322 00fc 8827      		clr r24
 323 00fe 9F71      		andi r25,31
 324 0100 9C01      		movw r18,r24
 325 0102 2C2B      		or r18,r28
 326 0104 E901      		movw r28,r18
 327               	.LVL29:
 153:quantum/keymap_common.c ****             break;
 328               		.loc 1 153 27 view .LVU60
 329 0106 00C0      		rjmp .L33
 330               	.LVL30:
 331               	.L11:
 106:quantum/keymap_common.c ****             // Layer set "GOTO"
 332               		.loc 1 106 34 is_stmt 1 view .LVU61
 108:quantum/keymap_common.c ****             action_layer = keycode & 0xF;
 333               		.loc 1 108 13 view .LVU62
 109:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_SET(action_layer, when);
 334               		.loc 1 109 13 view .LVU63
 110:quantum/keymap_common.c ****             break;
 335               		.loc 1 110 13 view .LVU64
 108:quantum/keymap_common.c ****             action_layer = keycode & 0xF;
 336               		.loc 1 108 37 is_stmt 0 view .LVU65
 337 0108 CE01      		movw r24,r28
 338               	.LVL31:
 108:quantum/keymap_common.c ****             action_layer = keycode & 0xF;
 339               		.loc 1 108 37 view .LVU66
 340 010a E4E0      		ldi r30,4
 341               		1:
 342 010c 9695      		lsr r25
 343 010e 8795      		ror r24
 344 0110 EA95      		dec r30
 345 0112 01F4      		brne 1b
 346               	.LVL32:
 108:quantum/keymap_common.c ****             action_layer = keycode & 0xF;
 347               		.loc 1 108 26 view .LVU67
 348 0114 8370      		andi r24,lo8(3)
 110:quantum/keymap_common.c ****             break;
 349               		.loc 1 110 28 view .LVU68
 350 0116 2C2F      		mov r18,r28
 351 0118 2695      		lsr r18
 352 011a 2695      		lsr r18
 353 011c 2370      		andi r18,lo8(3)
 354 011e 40E2      		ldi r20,lo8(32)
 355 0120 249F      		mul r18,r20
 356 0122 9001      		movw r18,r0
 357 0124 1124      		clr __zero_reg__
 358 0126 382B      		or r19,r24
 359 0128 8C2F      		mov r24,r28
 360 012a 8370      		andi r24,lo8(3)
 361 012c C1E0      		ldi r28,lo8(1)
 362 012e D0E0      		ldi r29,0
 363               	.LVL33:
 110:quantum/keymap_common.c ****             break;
 364               		.loc 1 110 28 view .LVU69
 365 0130 00C0      		rjmp 2f
 366               		1:
 367 0132 CC0F      		lsl r28
 368 0134 DD1F      		rol r29
 369               		2:
 370 0136 8A95      		dec r24
 371 0138 02F4      		brpl 1b
 372               	.L32:
 120:quantum/keymap_common.c ****             break;
 373               		.loc 1 120 28 view .LVU70
 374 013a C22B      		or r28,r18
 375 013c D32B      		or r29,r19
 376 013e DC68      		ori r29,140
 377               	.LVL34:
 121:quantum/keymap_common.c ****         case QK_TOGGLE_LAYER ... QK_TOGGLE_LAYER_MAX:;
 378               		.loc 1 121 13 is_stmt 1 view .LVU71
 379 0140 00C0      		rjmp .L8
 380               	.LVL35:
 381               	.L10:
 112:quantum/keymap_common.c ****             // Momentary action_layer
 382               		.loc 1 112 48 view .LVU72
 114:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_MOMENTARY(action_layer);
 383               		.loc 1 114 13 view .LVU73
 115:quantum/keymap_common.c ****             break;
 384               		.loc 1 115 13 view .LVU74
 115:quantum/keymap_common.c ****             break;
 385               		.loc 1 115 28 is_stmt 0 view .LVU75
 386 0142 DC2F      		mov r29,r28
 387 0144 CC27      		clr r28
 388 0146 C16F      		ori r28,241
 389 0148 D06A      		ori r29,160
 390               	.LVL36:
 116:quantum/keymap_common.c ****         case QK_DEF_LAYER ... QK_DEF_LAYER_MAX:;
 391               		.loc 1 116 13 is_stmt 1 view .LVU76
 392 014a 00C0      		rjmp .L8
 393               	.LVL37:
 394               	.L6:
 117:quantum/keymap_common.c ****             // Set default action_layer
 395               		.loc 1 117 48 view .LVU77
 119:quantum/keymap_common.c ****             action.code  = ACTION_DEFAULT_LAYER_SET(action_layer);
 396               		.loc 1 119 13 view .LVU78
 120:quantum/keymap_common.c ****             break;
 397               		.loc 1 120 13 view .LVU79
 120:quantum/keymap_common.c ****             break;
 398               		.loc 1 120 28 is_stmt 0 view .LVU80
 399 014c 8370      		andi r24,3
 400 014e 9927      		clr r25
 401               	.LVL38:
 120:quantum/keymap_common.c ****             break;
 402               		.loc 1 120 28 view .LVU81
 403 0150 21E0      		ldi r18,lo8(1)
 404 0152 30E0      		ldi r19,0
 405 0154 00C0      		rjmp 2f
 406               		1:
 407 0156 220F      		lsl r18
 408 0158 331F      		rol r19
 409               		2:
 410 015a 8A95      		dec r24
 411 015c 02F4      		brpl 1b
 412 015e C695      		lsr r28
 413 0160 C695      		lsr r28
 414               	.LVL39:
 120:quantum/keymap_common.c ****             break;
 415               		.loc 1 120 28 view .LVU82
 416 0162 80E2      		ldi r24,lo8(32)
 417 0164 C89F      		mul r28,r24
 418 0166 E001      		movw r28,r0
 419 0168 1124      		clr __zero_reg__
 420 016a 00C0      		rjmp .L32
 421               	.LVL40:
 422               	.L29:
 129:quantum/keymap_common.c ****             // OSL(action_layer) - One-shot action_layer
 423               		.loc 1 129 58 is_stmt 1 view .LVU83
 131:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_ONESHOT(action_layer);
 424               		.loc 1 131 13 view .LVU84
 132:quantum/keymap_common.c ****             break;
 425               		.loc 1 132 13 view .LVU85
 132:quantum/keymap_common.c ****             break;
 426               		.loc 1 132 28 is_stmt 0 view .LVU86
 427 016c DC2F      		mov r29,r28
 428 016e CC27      		clr r28
 429               	.LVL41:
 132:quantum/keymap_common.c ****             break;
 430               		.loc 1 132 28 view .LVU87
 431 0170 C46F      		ori r28,244
 432 0172 D06A      		ori r29,160
 433               	.LVL42:
 133:quantum/keymap_common.c ****         case QK_ONE_SHOT_MOD ... QK_ONE_SHOT_MOD_MAX:;
 434               		.loc 1 133 13 is_stmt 1 view .LVU88
 435 0174 00C0      		rjmp .L8
 436               	.LVL43:
 437               	.L14:
 134:quantum/keymap_common.c ****             // OSM(mod) - One-shot mod
 438               		.loc 1 134 54 view .LVU89
 136:quantum/keymap_common.c ****             action.code = ACTION_MODS_ONESHOT(mod);
 439               		.loc 1 136 13 view .LVU90
 136:quantum/keymap_common.c ****             action.code = ACTION_MODS_ONESHOT(mod);
 440               		.loc 1 136 27 is_stmt 0 view .LVU91
 441 0176 8C2F      		mov r24,r28
 442 0178 0E94 0000 		call mod_config
 443               	.LVL44:
 137:quantum/keymap_common.c ****             break;
 444               		.loc 1 137 13 is_stmt 1 view .LVU92
 137:quantum/keymap_common.c ****             break;
 445               		.loc 1 137 27 is_stmt 0 view .LVU93
 446 017c C82F      		mov r28,r24
 447               	.LVL45:
 137:quantum/keymap_common.c ****             break;
 448               		.loc 1 137 27 view .LVU94
 449 017e D0E0      		ldi r29,0
 450 0180 DC2F      		mov r29,r28
 451 0182 CC27      		clr r28
 452 0184 CC27      		clr r28
 453 0186 DF71      		andi r29,31
 454               	.LVL46:
 455               	.L33:
 153:quantum/keymap_common.c ****             break;
 456               		.loc 1 153 27 view .LVU95
 457 0188 D062      		ori r29,32
 458               	.LVL47:
 154:quantum/keymap_common.c **** #endif
 459               		.loc 1 154 13 is_stmt 1 view .LVU96
 460 018a 00C0      		rjmp .L8
 461               	.LVL48:
 462               	.L18:
 145:quantum/keymap_common.c ****             action_layer = (keycode >> 4) & 0xF;
 463               		.loc 1 145 13 view .LVU97
 145:quantum/keymap_common.c ****             action_layer = (keycode >> 4) & 0xF;
 464               		.loc 1 145 28 is_stmt 0 view .LVU98
 465 018c 8F70      		andi r24,lo8(15)
 466               	.LVL49:
 145:quantum/keymap_common.c ****             action_layer = (keycode >> 4) & 0xF;
 467               		.loc 1 145 28 view .LVU99
 468 018e 0E94 0000 		call mod_config
 469               	.LVL50:
 146:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_MODS(action_layer, mod);
 470               		.loc 1 146 13 is_stmt 1 view .LVU100
 147:quantum/keymap_common.c ****             break;
 471               		.loc 1 147 13 view .LVU101
 146:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_MODS(action_layer, mod);
 472               		.loc 1 146 37 is_stmt 0 view .LVU102
 473 0192 34E0      		ldi r19,4
 474               		1:
 475 0194 D695      		lsr r29
 476 0196 C795      		ror r28
 477 0198 3A95      		dec r19
 478 019a 01F4      		brne 1b
 479               	.LVL51:
 146:quantum/keymap_common.c ****             action.code  = ACTION_LAYER_MODS(action_layer, mod);
 480               		.loc 1 146 26 view .LVU103
 481 019c CF70      		andi r28,lo8(15)
 147:quantum/keymap_common.c ****             break;
 482               		.loc 1 147 28 view .LVU104
 483 019e 9C2F      		mov r25,r28
 484 01a0 EC01      		movw r28,r24
 485 01a2 D069      		ori r29,144
 486               	.LVL52:
 148:quantum/keymap_common.c **** #endif
 487               		.loc 1 148 13 is_stmt 1 view .LVU105
 488 01a4 00C0      		rjmp .L8
 489               		.cfi_endproc
 490               	.LFE20:
 492               		.section	.text.keymap_function_id_to_action,"ax",@progbits
 493               		.weak	keymap_function_id_to_action
 495               	keymap_function_id_to_action:
 496               	.LVL53:
 497               	.LFB24:
 184:quantum/keymap_common.c **** 
 185:quantum/keymap_common.c **** // translates function id to action
 186:quantum/keymap_common.c **** __attribute__((weak)) uint16_t keymap_function_id_to_action(uint16_t function_id) {
 498               		.loc 1 186 83 view -0
 499               		.cfi_startproc
 500               	/* prologue: function */
 501               	/* frame size = 0 */
 502               	/* stack size = 0 */
 503               	.L__stack_usage = 0
 187:quantum/keymap_common.c **** // The compiler sees the empty (weak) fn_actions and generates a warning
 188:quantum/keymap_common.c **** // This function should not be called in that case, so the warning is too strict
 189:quantum/keymap_common.c **** // If this function is called however, the keymap should have overridden fn_actions, and then the c
 190:quantum/keymap_common.c **** // is comparing against the wrong array
 191:quantum/keymap_common.c **** #pragma GCC diagnostic push
 192:quantum/keymap_common.c **** #pragma GCC diagnostic ignored "-Warray-bounds"
 193:quantum/keymap_common.c ****     return pgm_read_word(&fn_actions[function_id]);
 504               		.loc 1 193 5 view .LVU107
 505               	.LBB3:
 506               		.loc 1 193 12 view .LVU108
 507 0000 FC01      		movw r30,r24
 508 0002 EE0F      		lsl r30
 509 0004 FF1F      		rol r31
 510               	.LVL54:
 511               		.loc 1 193 12 is_stmt 0 view .LVU109
 512 0006 E050      		subi r30,lo8(-(fn_actions))
 513 0008 F040      		sbci r31,hi8(-(fn_actions))
 514               	.LVL55:
 515               		.loc 1 193 12 is_stmt 1 view .LVU110
 516               		.loc 1 193 12 view .LVU111
 517               	/* #APP */
 518               	 ;  193 "quantum/keymap_common.c" 1
 519 000a 8591      		lpm r24, Z+
 520 000c 9491      		lpm r25, Z
 521               		
 522               	 ;  0 "" 2
 523               	.LVL56:
 524               		.loc 1 193 12 view .LVU112
 525               	/* #NOAPP */
 526               	/* epilogue start */
 527               	.LBE3:
 194:quantum/keymap_common.c **** #pragma GCC diagnostic pop
 195:quantum/keymap_common.c **** }
 528               		.loc 1 195 1 is_stmt 0 view .LVU113
 529 000e 0895      		ret
 530               		.cfi_endproc
 531               	.LFE24:
 533               		.weak	fn_actions
 534               		.section	.progmem.data.fn_actions,"a"
 537               	fn_actions:
 538               		.text
 539               	.Letext0:
 540               		.file 2 "/usr/local/Cellar/avr-gcc@8/8.4.0/avr/include/stdint.h"
 541               		.file 3 "tmk_core/common/keyboard.h"
 542               		.file 4 "tmk_core/common/keycode.h"
 543               		.file 5 "tmk_core/common/action_code.h"
 544               		.file 6 "/usr/local/Cellar/avr-gcc@8/8.4.0/lib/avr-gcc/8/gcc/avr/8.4.0/include/stddef.h"
 545               		.file 7 "tmk_core/common/action_macro.h"
 546               		.file 8 "tmk_core/common/action.h"
 547               		.file 9 "tmk_core/common/report.h"
 548               		.file 10 "tmk_core/common/host.h"
 549               		.file 11 "tmk_core/common/avr/xprintf.h"
 550               		.file 12 "tmk_core/common/debug.h"
 551               		.file 13 "quantum/keycode_config.h"
 552               		.file 14 "quantum/quantum_keycodes.h"
 553               		.file 15 "quantum/keymap.h"
 554               		.file 16 "tmk_core/common/action_layer.h"
 555               		.file 17 "/usr/local/Cellar/avr-gcc@8/8.4.0/avr/include/stdio.h"
 556               		.file 18 "tmk_core/common/timer.h"
 557               		.file 19 "tmk_core/common/action_util.h"
 558               		.file 20 "/usr/local/Cellar/avr-gcc@8/8.4.0/avr/include/stdlib.h"
 559               		.file 21 "quantum/quantum.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 keymap_common.c
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:4      *ABS*:000000000000003f __SREG__
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:5      *ABS*:0000000000000000 __tmp_reg__
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:6      *ABS*:0000000000000001 __zero_reg__
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:13     .text.action_get_macro:0000000000000000 action_get_macro
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:37     .text.action_function:0000000000000000 action_function
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:56     .text.keymap_key_to_keycode:0000000000000000 keymap_key_to_keycode
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:113    .text.action_for_key:0000000000000000 action_for_key
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:495    .text.keymap_function_id_to_action:0000000000000000 keymap_function_id_to_action
/var/folders/7y/kbn66ztx1rs80r6yv6v16f4r0000gn/T//ccxv3kRC.s:537    .progmem.data.fn_actions:0000000000000000 fn_actions

UNDEFINED SYMBOLS
keymaps
keycode_config
mod_config
